<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="https://kit.fontawesome.com/b99e675b6e.js"></script>
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
    <link rel="stylesheet" href="{{ url_for('static',filename='css/style.css') }}">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <style>
        .category_select_btn {
            display: none;
        }
    </style>
    <script>

        $( document ).ready(function() {
            table_select_btn = document.getElementById("table_select_btn");
            $('option[class="select-option"]').click(function() {
            var inputValue = $(this).attr("value");
            document.getElementById("options").style="display: block"
            if (inputValue.length == 0) {
                document.getElementById("col_category").innerHTML = "<option></option>";
            }

            else {
                var colOptions = "<div class=\"form-group\">";
                for (column in tablesBycolumns[inputValue]) {
                    colOptions += "<label style=\"margin-right: 15px;\">" + `<input type='checkbox' name='column_name' value='${tablesBycolumns[inputValue][column]}'>` + " " + tablesBycolumns[inputValue][column] + "</label>";
                }
                colOptions += "</div>"
                document.getElementById("col_category").innerHTML =  colOptions + "<div class=\"container\" style=\"display: flex; justify-content: center;\"><button id=\"table_select_btn\" name=\"userselect\" type=\"submit\" class=\"btn btn-primary\" style=\"margin-top: 30px;\">Show data</button></div>";
            }

            $("<input />").attr("type", "hidden")
              .attr("name", "table_name")
              .attr("value", inputValue)
              .appendTo("#col_category");

        });
        });

        var tablesBycolumns = {
            user_: ["id", "phone_number", "name", "surname"],
            friend: ["id", "phone_number", "name", "surname", "description", "age", "gender"],
            party: ["party_id", "name"],
            rent_friends: ["rent_id", "friend_id"],
            rent: ["rent_id", "user_id", "date", "party_id"],
            friend_hobby: ["friend_id", "hobby_id"],
            hobby: ["hobby_id", "name"],
            day_offs: ["friend_id", "date"],
            present: ["present_id", "name", "price"],
            present_given: ["given_id", "present_id", "user_id", "friend_id", "date", "is_returned"],
            complaint: ["complaint_id", "text", "friend_id", "date"],
            user_complaint: ["user_id", "complaint_id"]
        }

        
    </script>
</head>
<body>
    <div class="header">
        <p class="tooltips">Step 1: Select option</p>
    </div>
    <select href="custom.css" name="meal" class="form-select select-action" id="meal" aria-label="Default select example" style="margin-left: 25%; margin-right: 10%; width: 50%; margin-top: 15px;">
        <option class="select-option" disabled="" selected=""> -- select an option -- </option>
        <option class="select-option" value="user_">user</option>
        <option class="select-option" value="friend">friend</option>
        <option class="select-option" value="party">party</option>
        <option class="select-option" value="rent_friends">rent_friends</option>
        <option class="select-option" value="rent">rent</option>
        <option class="select-option" value="friend_hobby">friend_hobby</option>
        <option class="select-option" value="hobby">hobby</option>
        <option class="select-option" value="day_offs">day_offs</option>
        <option class="select-option" value="present">present</option>
        <option class="select-option" value="present_given">present_given</option>
        <option class="select-option" value="complaint">complaint</option>
        <option class="select-option" value="user_complaint">user_complaint</option>

    </select>
    <div class="container" style="display: flex; justify-content: center; margin-top: 20px; color: #fff;">
        <div id="options" class="options" style="display: none;">
            <div class="header">
                <p class="tooltips">Step 2: Select columns</p>
            </div>
            <form id="col_category" action="/user_query_result" method="POST">
                <div class="container" style="display: flex; justify-content: center; display: none;">
                    <button id="table_select_btn" name="userselect" type="submit" class="btn btn-primary">Show data</button>
                </div>
            </form>
        </div>
    </div>
    
</body>
</html>